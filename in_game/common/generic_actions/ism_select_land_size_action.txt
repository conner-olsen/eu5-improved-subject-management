ism_select_land_size_action = {
    type = owncountry
    show_message = no
    show_message_to_target = no
    ai_tick = never
    automation_tick = never


    potential = {  }
    allow = {  }

    select_trigger = {
        looking_for_a = situation
        target_flag = transfer_mode
        name = select_transfer_mode

        interaction_source_list = {
            situation:ism_transfer_mode_location = { add_to_list = source }
            situation:ism_transfer_mode_province = { add_to_list = source }
            situation:ism_transfer_mode_area     = { add_to_list = source }
            situation:ism_transfer_mode_region   = { add_to_list = source }
        }

        column = { data = name }
    }

    select_trigger = {
        looking_for_a = location
        source = actor
        target_flag = target_location
        source_flags = only_actual_locations
        name = "transfer_location_to_subject_select_title"
        none_available_msg_key = "no_valid_locations"

        column = { data = name }
        column = { data = population }

        show_if = {
            exists = scope:transfer_mode
            scope:transfer_mode = situation:ism_transfer_mode_location
        }

        visible = {
            can_transfer_location = {
                giver = scope:actor
                receiver = scope:recipient
            }
        }

        enabled = {
            custom_tooltip = {
                text = cannot_transfer_capital
                NOT = {
                    scope:actor.capital = this
                }
            }
        }
    }

    select_trigger = {
        looking_for_a = province
        source = actor
        target_flag = target_province
        name = "transfer_province_to_subject_select_title"
        none_available_msg_key = "no_valid_provinces"

        column = { data = name }
        column = { data = population }

        show_if = {
            exists = scope:transfer_mode
            scope:transfer_mode = situation:ism_transfer_mode_province
        }

        visible = {
            can_transfer_province = {
                giver = scope:actor
                receiver = scope:recipient
            }
        }

        enabled = {
            custom_tooltip = {
                text = cannot_transfer_capital
                NOT = {
                    scope:actor.capital.province = this
                }
            }
        }
    }

    select_trigger = {
        looking_for_a = area
        source = actor
        target_flag = target_area
        name = "transfer_area_to_subject_select_title"
        none_available_msg_key = "no_valid_areas"

        column = { data = name }
        column = { data = population }

        show_if = {
            exists = scope:transfer_mode
            scope:transfer_mode = situation:ism_transfer_mode_area
        }

        visible = {
            can_transfer_area = {
                giver = scope:actor
                receiver = scope:recipient
            }
        }

        enabled = {
            custom_tooltip = {
                text = cannot_transfer_capital
                NOT = {
                    scope:actor.capital.area = this
                }
            }
        }
    }

    select_trigger = {
        looking_for_a = region
        source = actor
        target_flag = target_region
        name = "transfer_region_to_subject_select_title"
        none_available_msg_key = "no_valid_regions"

        column = { data = name }
        column = { data = population }

        show_if = {
            exists = scope:transfer_mode
            scope:transfer_mode = situation:ism_transfer_mode_region
        }

        visible = {
            can_transfer_region = {
                giver = scope:actor
                receiver = scope:recipient
            }
        }

        enabled = {
            custom_tooltip = {
                text = cannot_transfer_capital
                NOT = {
                    scope:actor.capital.region = this
                }
            }
        }
    }

    effect = {
        if = {
            limit = {
                exists = scope:transfer_mode
            }

            # Location
            if = {
                limit = {
                    scope:transfer_mode = situation:ism_transfer_mode_location
                }
                ism_transfer_location_effect = {
                    giver = scope:actor
                    receiver = scope:recipient
                    target_location = scope:target_location
                }
                hidden_effect = {
                    fire_generic_action = {
                        type = ism_transfer_location_action
                        actor = scope:actor
                        recipient = scope:recipient
                    }
                }
            }

            # Province
            if = {
                limit = {
                    scope:transfer_mode = situation:ism_transfer_mode_province
                }
                ism_transfer_province_effect = {
                    giver = scope:actor
                    receiver = scope:recipient
                    target_province = scope:target_province
                }
                hidden_effect = {
                    fire_generic_action = {
                        type = ism_transfer_province_action
                        actor = scope:actor
                        recipient = scope:recipient
                    }
                }
            }

            # area
            if = {
                limit = {
                    scope:transfer_mode = situation:ism_transfer_mode_area
                }
                ism_transfer_area_effect = {
                    giver = scope:actor
                    receiver = scope:recipient
                    target_area = scope:target_area
                }
                hidden_effect = {
                    fire_generic_action = {
                        type = ism_transfer_area_action
                        actor = scope:actor
                        recipient = scope:recipient
                    }
                }
            }

            # region
            if = {
                limit = {
                    scope:transfer_mode = situation:ism_transfer_mode_region
                }
                ism_transfer_region_effect = {
                    giver = scope:actor
                    receiver = scope:recipient
                    target_region = scope:target_region
                }
                hidden_effect = {
                    fire_generic_action = {
                        type = ism_transfer_region_action
                        actor = scope:actor
                        recipient = scope:recipient
                    }
                }
            }
        }
    }
}